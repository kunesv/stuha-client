.button {
  display: flex;
  align-items: center;
  justify-content: center;

  background: $color-background-button no-repeat center;
  background-size: auto 100%;

  color: rgba(white, 0.8);
  cursor: pointer;
  font-size: $font-size-small;
  height: 2.5 * $module;
  padding: 0;

  transition: background-color 400ms, box-shadow 100ms;

  outline: none;
  -webkit-tap-highlight-color: rgba(black, 0);

  text-decoration: none;
  user-select: none;

  &:hover {
    background-color: #48177a;
  }

  &.clicked {
    box-shadow: 0 0 0 $module-half rgba(black, 0.5) inset;
  }

  &.progress {
    background: $color-background-message url("/img/progress.svg") no-repeat center;
    cursor: inherit;

    &:hover {
      background-color: $color-background-message;
    }

    span {
      visibility: hidden;
    }
  }

  &.done {
    background: #6c6 url("/img/done.svg") no-repeat center;
    background-size: auto 100%;
    cursor: inherit;

    &:hover {
      background-color: #6c6;
    }

    span {
      visibility: hidden;
    }
  }

  &.error {
    background: $color-background-error url("/img/reload.svg") no-repeat center;

    &:hover {
      background-color: $color-background-error;
    }

    span {
      visibility: hidden;
    }
  }
}

form .button {

}

button {
  @extend .button;

  border: 0 none;
  width: 100%;

  &.clicked {
    @extend .button.clicked;
  }
}

.scale-button {
  transition: transform 100ms ease-in-out, opacity 100ms ease-in;

  &:hover {
    background-color: $color-background;
  }

  &.clicked {
    box-shadow: 0 0 rgba(black, 0);
    transform: scale(.9);
  }
}

.close-button {
  margin: 0;

  > .button {
    height: 2.5 * $module;
    width: 2.5 * $module;
  }
}

.secondary.button {
  background-color: $color-background-button-secondary;

  &:hover {
    background-color: $color-background-button-secondary-active;
  }
}

.beige.button {
  background-color: #b1a77d;

  &:hover {
    background-color: #a69a6b;
  }
}

.light.button {
  background-color: rgba(black, .02);
  color: #777;

  &:hover {
    background-color: rgba(black, .04);
  }
}

.translucent.button {
  background-color: rgba(#666, 0.5);

  &:hover {
    background-color: rgba(#555, 0.75);
  }
}

.disabled.button {
  background-color: rgba(#666, 0.1);
  cursor: default;

  &:hover {
    background-color: rgba(#666, 0.1);
  }
  &.clicked {
    box-shadow: none;
  }
}

.menu-button .button {
  background-image: url("/img/menu.svg");
  background-position: right center;

  //transition: background-color 4s, box-shadow 100ms;

  position: relative;

  &:after {
    @extend .button.progress;

    transition: opacity 300ms;
    opacity: 0;

    display: block;
    content: "";

    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    position: absolute;
  }

  &.loading:after {
    opacity: 1;
  }
}

.menu-button.unread-conversations {
  .button {
    background-color: #6c6;
  }
}

.moved .menu-button.unread-conversations {
  .button {
    @extend .secondary;
  }
}

form.show-errors .button {
  @extend .button.error;
}

.add-button {
  position: fixed;
  bottom: 0;
  right: 0;

  padding: $module-half;

  width: 2.5 * $module;

  z-index: 1000;

  @media (min-width: $small-screen-threshold + 1px) {
    bottom: 2 * $module-half;
    right: $module;
  }
}

.add-button .button {
  border-radius: 50%;

  background-image: url("/img/plus.svg");
  &.light {
    background-image: url("/img/plus-message-dark.svg");
  }
}

.conversation-member-add > .button {
  background-image: url("/img/conversation-member-add.svg");
}

.conversation-member-add.form > .button {
  background-image: url("/img/ex-dark.svg");
}

.close-button .button {
  background-image: url("/img/ex.svg");
}

.submit.button, button[type=submit] {
  height: 2.5 * $module;
  flex: 0 1 100%;

  background-image: url("/img/submit.svg");
  background-size: auto 100%;

  &.progress {
    @extend .button.progress;
  }

  &.error {
    @extend .button.error;
  }
}

.conversation.button {
  border-left: 1px solid rgba(white, 0.4);

  background-image: url("/img/conversation-content.svg");
  flex: 0 0 2.5 * $module;

  @media (min-width: $small-screen-threshold + 1px) {
    border-left: 0 none;
    background-color: transparent;

    &:hover {
      background-color: rgba(black,.04);
    }
  }
}

.members.button {
  background-image: url("/img/conversation-member.svg");
  flex: 0 0 2.5 * $module;
}

.reload.button {
  background-image: url("/img/reload.svg");
  border-radius: 50%;
  height: 2.5 * $module;
  flex: 0 0 2.5 * $module;
}

.user-settings.button {
  background-image: url("/img/user-settings.svg");
  flex: 0 0 2.5 * $module;
}

.logout.button {
  //flex: 0 0 2.5 * $module;
}

.dated-conversations.button {
  background-image: url("/img/conversation-settings.svg");

  &.active {
    background-image: url("/img/ex-dark.svg")
  }
}

.add.button {
  background-image: url("/img/plus-dark.svg");

  &.active {
    background-image: url("/img/ex-dark.svg")
  }
}

.notification {

  &.disabled {
    display: none;
  }

  .button {
    background-image: url("/img/notifications.svg");

    &.active {
      background-color: #dcdcdc;
      //background-image: url("/images/notifications-white.svg");
    }
  }
}

.previous-button .button {

}

.next-button .button {

}

.load-more .button {
  &:first-child {
    background-image: url("/img/load-more.svg");
  }
  &:nth-child(2) {
    //background-color: #6c6;
    background-image: url("/img/new-dark.svg");
  }

  &.progress:first-child, &.progress:nth-child(2) {
    @extend .button.progress;
  }

  &.error:first-child, &.error:nth-child(2) {
    @extend .button.error;
  }
}

ul.menu {
  padding: 0;
  margin: 0;
  list-style: none;

  display: flex;
  flex-direction: column;

  li {
    display: flex;
    flex: 0 0 2.5 * $module;

    position: relative;

    transition: box-shadow 100ms, background-color 400ms, flex 300ms $animation-curve, transform 300ms, opacity 300ms;

    padding: 0 0 $module-half;

    &.editable {
      flex-direction: column;

      &.active {
        position: absolute;
        width: 100%;
        height: auto;

        left: 0;

        background-color: #e3e3e3;
        box-shadow: 0 2px 0.4045rem #ccc;

        z-index: 500;

        > form {
          opacity: 1;
          transform: scale3d(1, 1, 1);
        }
      }
    }

    > a {
      height: 2.5 * $module;

      display: flex;

      background-color: transparent;

      transition: background-color 300ms;

      flex: 1 1 100%;

      &:hover {
        background-color: rgba(#000, 0.02);
      }

      &.active {
        background-color: #dcdcdc;

        > span {
          color: #333;
        }
      }

      &.clicked {
        box-shadow: 0 0 0 0 transparent;
        background-color: #c0c0c0;
      }

      > span:first-child {
        flex: 0 0 2.5 * $module;
        background-position: center;
        background-repeat: no-repeat;
        background-size: 100%;
        height: 2.5 * $module;
      }
      > span:last-child {
        flex: 1 0 1.5 * $module;

        padding-left: $module-half;

        display: flex;
        align-items: center;

        line-height: $module-half;

        color: #777;
        font-size: $font-size-smaller;
        text-align: center;
      }
    }

    > form {
      display: flex;
      flex-direction: column;
      justify-content: center;

      padding: 0 $module-half $module-half;

      transform: scale3d(1, 0, 0);
      opacity: 0;
      transform-origin: top right;
      transition: transform 300ms $animation-curve, opacity 300ms;

      z-index: 1;

      > div {
        display: flex;

        &:last-child {
          justify-content: flex-end;
        }

        > label {
          color: #666;
        }

        > p {
          display: flex;

          flex: 1 0 %75;
          //height: 1.75 * $module;
          margin: 0;

          background-color: white;

          input {
            width: calc(100% - #{$module});
          }
        }
        > a.submit {
          flex: 0 0 2 * $module;
          height: 2 * $module;
        }
      }
    }

  }

  &.compact {
    flex: 0 0 3 * $module;
    justify-content: flex-start;
    flex-wrap: wrap;
    flex-direction: row;
    li {
      flex: 0 0 2.5 * $module;
      height: 2.5 * $module;

      &.form {
        flex-grow: 1;
      }

      > a {
        flex: 0 0 2.5 * $module;
        width: 2.5 * $module;

        align-self: flex-end;

        transition: flex 100ms $animation-curve, width 100ms $animation-curve;
      }

      &.active {
        > a {
          flex: 0 0 2 * $module;
          width: 2 * $module;
          background-color: $color-background-button-secondary;
          background-image: url("/img/ex.svg");
        }
      }
    }
  }

  &.notext {
    li > a {
      padding: 0;
      height: 2.5 * $module;
      flex: 0 0 2.5 * $module;
    }
  }

  &.conversations {
    li {
      > a > span:first-child {
        //border-radius: 50%;
        //background-color: $color-background-button-secondary;
        position: relative;

        border-right: 1px solid rgba(white, 0.4);
      }
      > a.active > span:first-child {
        //background-color: $color-background-button-secondary-active;
      }
    }
  }
}